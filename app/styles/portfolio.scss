@import "global/_style_elements.scss";
@import "global/_breakpoints.scss";

$holder-color: #ddd;
$holder-accent: rgba(0, 0, 0, 0.1);

@mixin set-aspect($aspect){
  overflow: hidden;
  .aspect{
    position: relative;
    padding-top: $aspect;
    img, video{
      position: absolute;
      top: 0;
      object-fit: cover;
      object-position: top;
    }
    video{ height: 100%; }
  }
}

.portfolio-page{
  .bg-fill{ background-color: $base-bg; }
  h2.project{
    font-weight: 200;
    font-size: 1.3em;
    margin: 3px 0 0;
    line-height: 1.3em;
  }

  .content-header{
    text-align: center;
    padding-bottom: 16px;
    .link{ display: block; }
  }

  .content{
    max-width: $wide-breakpoint;
    margin: 0 auto;
    &:not(.styled){
      text-align: center;
      img{ max-width: 50%; }
    }
    &.styled{
      img, video{ width: 100%; }
    }
    .image{ margin: 0 auto; }
  }

  .content-info{
    display: flex;
    flex-wrap: wrap;
    p{ margin-top: 0; }
  }

  .caption{
    text-align: center;
    margin-top: 10px;
  }
}


@media screen and (min-width: 570px){
  .portfolio-page{
    h2.project{ font-size: 1.2em; margin: 0; }
  }
}

@media screen and (min-width: $mid-high-breakpoint){
  .portfolio-page{
    h2.project{ font-size: 2em; }

    .content-header{ padding: 20px 0 30px; }

    .content-info{
      @include max-cap;
      .desc{
        flex: 1 1 80%;
        padding-right: 40px;
        box-sizing: border-box;
      }
      .tools-container{ flex: 1 1 20%; }
    }

    .content.styled{
      .content-wrapper{
        margin: 60px  0;
      }
      .image-wrapper{
        max-width: 750px;
        margin: 0 auto;
        font-size: 0;
        .caption{ font-size: 1rem; }
      }
    }

    .browser{
      .image-wrapper{
        $rounded: 5px;

        position: relative;
        border: 1px solid $holder-color;
        border-top-width: 30px;
        border-radius: $rounded;
        box-sizing: border-box;
        &:before, &:after{
          content: "";
          position: absolute;
        }
        &:before{
          width: 61px;
          top: -25px;
          height: 20px;
          left: 7px;
          background: radial-gradient($holder-accent 48%, transparent 16%);
          background-size: 20px 20px;
        }
        &:after{
          width: 60%;
          height: 20px;
          top: -25px;
          left: 76px;
          background-color: #fff;
          border-radius: 8px;
        }
        img{
          border-radius: 0 0 $rounded $rounded;
        }
      }
      &.set-aspect{
        @include set-aspect(percentage(9/16));
        .image-wrapper .aspect{ overflow-y: auto; }
      }
    }

    .device{
      $thickness: 60px;
      .image-wrapper{
        position: relative;
        border-radius: 50px;
        border: $thickness solid $holder-color;
        background-color: $holder-color;
        box-sizing: border-box;
        &:before, &:after{
          content: "";
          position: absolute;
          border-radius: 50%;
          z-index: 1;
          background-color: $holder-accent;
        }
        &:after{
          border: 2px solid lighten($holder-accent, 30%);
          box-sizing: border-box;
        }
        img, video{
          border-radius: 3px;
        }
      }

      &.ipad .image-wrapper{
        &:before, &:after{
          top: 50%;
          transform: translateY(-50%);
        }
        &:before{
          $size: 14px;

          left: -(($size/2) + ($thickness/2));
          width: $size;
          height: $size;
        }
        &:after{
          $size: 40px;

          right: -(($size/2) + ($thickness/2));
          width: $size;
          height: $size;
        }
      }

      &.iphone{
        @include set-aspect(percentage(16/9));
        .image-wrapper{
          $side-width: 20px;

          max-width: 280px;
          border-radius: 30px;
          border-left-width: $side-width;
          border-right-width: $side-width;
          &:before, &:after{
            left: 50%;
            transform: translateX(-50%);
          }
          &:before{
            $size: 8px;

            // top: 0;
            top: -(($size/2) + ($thickness/2));

            width: $size;
            height: $size;
          }
          &:after{
            $size: 40px;
            // bottom: 0;
            bottom: -(($size/2) + ($thickness/2));
            width: $size;
            height: $size;
          }
        }
      }
    }
  }
}

@media screen and (min-width: $wide-breakpoint){
  .portfolio-page{
    .content-wrapper{
      display: flex;
      .caption{
        margin-top: 0;
        padding-left: 24px;
        flex: 1 1 32%;
        text-align: left;
        box-sizing: border-box;
      }
    }
  }
}

