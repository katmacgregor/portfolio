@import "global/_breakpoints.scss";
@import "global/_style_elements.scss";
@import "mixins/mixins.scss";

.home{
  .content-container{
    @include container-alternating-color($base-bg, $base: 0%);
  }
  .bg-fill{ @include page-background($day-base, $day-accent); }

  &.day.afternoon{
    .bg-fill{ @include page-background($afternoon-base, $afternoon-accent); }
    .content-container.work .content-item .thumb{ background-color: $afternoon-thumb; }
  }

  &:not(.night) .fa.list{ color: $day-text; }
  &.night{
    color: $night-text;

    .main-container .arrow{ border-color: #fff; }
    .bg-fill{ @include page-background($night-base, $night-accent); }
    .content-container.work .content-item .thumb{ background-color: $night-thumb; }

    a{
      &, html.no-touch &:hover, &:active, &:visited{ color: $night-text; }
    }

    h1 .accent, h3{ color: $night-text; }
    .fa{ color: rgba(255, 255, 255, 0.75); }

    .content-container.about{ color: $day-text; }

    &.evening{
      .bg-fill{ @include page-background($evening-base, $evening-accent); }
      .content-container.work .content-item .thumb{ background-color: $evening-thumb; }
    }
    &.midnight{
      .bg-fill{ @include page-background($midnight-base, $midnight-accent); }
      .content-container.work .content-item .thumb{ background-color: $midnight-thumb; }
    }
  }

  &.fixed{
    &, &.night, &.evening, &.day, &.afternoon{
      .bg-fill{ animation-play-state: paused; }
    }
  }

  .content-container{
    &.work{
      $content-spacing: 10px;

      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: $side-padding - $content-spacing;
      .content-item{
        $trans-dur: 350ms;
        $item-size: 50%;

        position: relative;
        overflow: hidden;
        padding: $content-spacing;
        box-sizing: border-box;
        flex: 1 1 $item-size;
        max-width: $item-size;
        .item{
          display: block;
          position: relative;
          height: 100%;
          overflow: hidden;
          color: $light-text;
          html.no-touch &:hover{
            .content-info{
              opacity: 1;
              .text{ transform: translateY(-50%); }
            }
          }
        }
        .wrapper{
          position: relative;
          padding-top: percentage(9/16);
        }
        .thumb, .content-info, .content-info:after{
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }
        .thumb{
          background-color: $day-thumb;
          background-size: 42%;
          background-position: center;
          background-repeat: no-repeat;
        }
        .content-info{
          text-align: center;
          opacity: 0;
          background-position: center;
          background-size: cover;
          transition: opacity $trans-dur;
          &:after{
            content: "";
            background-color: rgba(0, 0, 0, 0.6);
          }
          .text{
            position: absolute;
            top: 50%;
            width: 100%;
            padding: 10px;
            z-index: 1;
            text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
            transform: translateY(-30%);
            transition: transform $trans-dur * 1.75;
            .project{
              font-size: 1.3em;
              line-height: 1.5em;
            }
          }
        }
      }
    }
    &.skills{
      padding-top: $side-padding + 10px;
      .content-wrapper{ @include max-cap; }
      .section-wrapper{
        display: flex;
        justify-content: space-around;
        .section{ flex: 1 1; }
      }
    }
  }
}

@keyframes gradient-fade{
  0%{ background-position: 0% 51%; }
  33%{ background-position: 100% 0%; }
  66%{ background-position: 100% 50%; }
  100%{ background-position: 0% 100%; }
}

@media screen and (min-width: $mid-high-breakpoint) and (min-height: 550px){
  .home{
    &.scrolled .main-container .arrow{ opacity: 0; }
    .main-container{
      .arrow{
        $arrow-offset: 60px;
        $arrow-width: 20px;
        $border: 4px solid #000;

        position: absolute;
        left: 50%;
        top: calc(100vh - #{$arrow-offset});
        width: $arrow-width;
        height: $arrow-width;
        opacity: 0.3;
        cursor: pointer;
        border-top: $border;
        border-right: $border;
        transform: translateX(-50%) rotate(135deg);
        transition: opacity 300ms;
        html.no-touch &:hover{ opacity: 1; }
      }
      .content-container.fill-screen{
        .content{
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }
        &.header .content{
          top: 45%;
        }
      }
    }
  }
}

@media screen and (max-width: $mid-high-breakpoint - 1px){
  .home{
    .header.home .title{ padding-top: 40px; }
  }
}

@media screen and (min-width: $mid-high-breakpoint){
  .home{
    .header.home .title{ font-size: 1.8em; }
    .content-container{
      &.skills{
        .section{
          $item-size: percentage(1/3);

          &:first-child{ padding-right: $side-padding; }
          &:last-child{ padding-left: $side-padding; }
          h5{
            text-align: center;
          }
          .items{
            display: flex;
            flex-wrap: wrap;
          }
          p{
            flex: 1 1 $item-size;
            max-width: $item-size;
            padding-right: 16px;
            box-sizing: border-box;
          }
        }
      }
      &.header .content{
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      &.fill-screen{
        $padding-offset: ($side-padding * 2);

        height: 100vh;
        &:not(.skip-padding){
          height: calc(100vh - #{$padding-offset});
        }
      }
      &.work .content-item{
        $item-size: percentage(1/3);

        flex: 1 1 $item-size;
        max-width: $item-size;
      }
    }
  }
}

@media screen and (max-width: $max-breakpoint - 1px){
  .home .content-container.work .content-item .content-info{
    .content-desc{ display: none; }
  }
}

@media screen and (min-width: $wide-breakpoint){
  .home .content-container.work .content-item{
    $item-size: 25%;

    flex: 1 1 $item-size;
    max-width: $item-size;
    .content-info .text .project{ white-space: nowrap; }
  }
}
